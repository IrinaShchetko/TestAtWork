import React, { useState, useEffect } from 'react';
import { useNavigate, useParams } from 'react-router-dom';
import { useSelector } from 'react-redux';

import photo from '../../assets/photo.png';
import styles from './styles.module.css';

export const Header = () => {
  const { id } = useParams();
  const { data } = useSelector((state) => state.fetch);
  const [formData, setFormData] = useState({
    username: '',
  });

  const user = data.find((user) => user.id === parseInt(id)) || data[0];

  useEffect(() => {
    if (user) {
      setFormData({
        username: user.username,
      });
    }
  }, [user]);

  const navigate = useNavigate();

  const handleLogoClick = () => {
    navigate('/');
  };

  return (
    <header className={styles.header}>
      <div className={styles.logo} onClick={handleLogoClick}>
        <svg
          className={styles.image}
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <rect width="24" height="24" rx="12" fill="#EF1C31" />
          <path
            d="M14.375 9.06923C14.375 9.9731 13.6521 10.7058 12.7603 10.7058C11.8685 10.7058 11.1455 9.9731 11.1455 9.06923C11.1455 8.16536 11.8685 7.43262 12.7603 7.43262C13.6521 7.43262 14.375 8.16536 14.375 9.06923Z"
            fill="white"
          />
          <path
            d="M8.10134 10.9946C7.55613 10.9075 7.29282 11.6382 7.76829 11.9189L9.95994 13.2126L4.88002 19.9598C4.65795 20.2547 5.0613 20.6124 5.32754 20.3566L12.629 13.341C13.2244 12.769 12.9092 11.7627 12.0939 11.6325L8.10134 10.9946Z"
            fill="white"
          />
          <path
            d="M12.2836 14.804L10.5772 16.4455L11.7291 17.9868L9.83724 19.0904C9.53114 19.269 9.73322 19.7374 10.0732 19.6373L13.3696 18.6665C14.0244 18.4736 14.2978 17.6958 13.9076 17.1357L12.2836 14.804Z"
            fill="white"
          />
          <path
            d="M15.0484 4.27958C14.962 4.52582 15.0802 4.79571 15.3129 4.91399C16.124 5.32635 16.8788 5.87492 17.5421 6.56368C17.9206 6.96011 18.249 7.37848 18.5354 7.81049C18.6876 8.04 18.9919 8.1199 19.2295 7.98063L21.4949 6.65256C21.7388 6.50957 21.8166 6.19228 21.6548 5.96038C21.4659 5.68949 21.2609 5.4205 21.0399 5.15699C19.7888 3.6595 18.3929 2.38117 16.5047 1.62633C16.2502 1.52457 15.9672 1.66311 15.8764 1.92176L15.0484 4.27958Z"
            fill="white"
          />
          <path
            d="M3.00662 7.26647C3.20963 7.41969 3.49458 7.39544 3.67787 7.21911C4.70443 6.23158 6.17783 5.1942 7.27379 4.70929C7.31531 4.69129 7.35733 4.67329 7.39975 4.6554C7.67364 4.53988 7.80694 4.21938 7.67928 3.95093L7.05939 2.64744C6.93739 2.39089 6.62573 2.28644 6.38121 2.43104C4.9444 3.28073 3.91312 4.35396 3.17528 5.31672C2.91952 5.65274 2.69043 5.98876 2.48315 6.32726C2.3524 6.54078 2.41086 6.8168 2.6107 6.96763L3.00662 7.26647Z"
            fill="white"
          />
          <path
            d="M15.0756 1.74325C15.1735 1.46515 15.0109 1.16214 14.7213 1.10678C14.1507 0.997699 13.5389 0.930705 12.8805 0.911344C10.9769 0.843092 9.38528 1.13911 8.0571 1.63289C7.79104 1.7318 7.67567 2.03905 7.79745 2.29545L8.53735 3.85329C8.63958 4.06854 8.87923 4.18035 9.11263 4.13232C10.5828 3.82977 12.1656 3.86182 13.6605 4.27694C13.924 4.35011 14.205 4.21443 14.2958 3.95649L15.0756 1.74325Z"
            fill="white"
          />
          <path
            d="M2.80787 8.19261C2.82059 8.17749 2.81368 8.15381 2.79793 8.14188L2.37307 7.81986C2.11939 7.62759 1.75216 7.719 1.63272 8.01405C0.246752 11.4378 0.842481 14.5944 0.941215 15.0551C0.948751 15.0903 0.979443 15.1128 1.01541 15.1128C1.06461 15.1128 1.1021 15.068 1.09445 15.0194C1.00302 14.4386 0.62685 11.245 2.80439 8.19702C2.80562 8.19529 2.80651 8.19424 2.80787 8.19261Z"
            fill="white"
          />
          <path
            d="M19.5854 8.7349C19.3608 8.86664 19.2763 9.14872 19.3792 9.38793C20.2883 11.5015 20.4092 13.612 20.4101 14.5739C20.4103 14.8649 20.6437 15.1128 20.9347 15.1128H23.221C23.4563 15.1128 23.6581 14.9482 23.6906 14.7151C23.8376 13.6593 24.07 10.655 22.5955 7.57207C22.473 7.316 22.1565 7.22693 21.9117 7.37054L19.5854 8.7349Z"
            fill="white"
          />
        </svg>
        <svg
          className={styles.sign}
          width="92"
          height="20"
          viewBox="0 0 92 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M5.69318 18.3068C4.86364 18.3068 4.1108 18.1506 3.43466 17.8381C2.75852 17.5199 2.22159 17.0625 1.82386 16.4659C1.42614 15.8636 1.22727 15.1364 1.22727 14.2841C1.22727 13.5341 1.375 12.9261 1.67045 12.4602C1.96591 11.9886 2.3608 11.6193 2.85511 11.3523C3.34943 11.0852 3.89489 10.8864 4.49148 10.7557C5.09375 10.6193 5.69886 10.5114 6.30682 10.4318C7.10227 10.3295 7.74716 10.2528 8.24148 10.2017C8.74148 10.1449 9.10511 10.0511 9.33239 9.92045C9.56534 9.78977 9.68182 9.5625 9.68182 9.23864V9.17045C9.68182 8.32955 9.4517 7.67614 8.99148 7.21023C8.53693 6.74432 7.84659 6.51136 6.92045 6.51136C5.96023 6.51136 5.20739 6.72159 4.66193 7.14205C4.11648 7.5625 3.73295 8.01136 3.51136 8.48864L1.60227 7.80682C1.94318 7.01136 2.39773 6.39205 2.96591 5.94886C3.53977 5.5 4.16477 5.1875 4.84091 5.01136C5.52273 4.82955 6.19318 4.73864 6.85227 4.73864C7.27273 4.73864 7.75568 4.78977 8.30114 4.89204C8.85227 4.98864 9.38352 5.19034 9.89489 5.49716C10.4119 5.80398 10.8409 6.26705 11.1818 6.88636C11.5227 7.50568 11.6932 8.33523 11.6932 9.375V18H9.68182V16.2273H9.57955C9.44318 16.5114 9.21591 16.8153 8.89773 17.1392C8.57955 17.4631 8.15625 17.7386 7.62784 17.9659C7.09943 18.1932 6.45455 18.3068 5.69318 18.3068ZM6 16.5C6.79545 16.5 7.46591 16.3438 8.01136 16.0312C8.5625 15.7188 8.97727 15.3153 9.25568 14.821C9.53977 14.3267 9.68182 13.8068 9.68182 13.2614V11.4205C9.59659 11.5227 9.40909 11.6165 9.11932 11.7017C8.83523 11.7812 8.50568 11.8523 8.13068 11.9148C7.76136 11.9716 7.40057 12.0227 7.0483 12.0682C6.7017 12.108 6.42045 12.142 6.20455 12.1705C5.68182 12.2386 5.19318 12.3494 4.73864 12.5028C4.28977 12.6506 3.92614 12.875 3.64773 13.1761C3.375 13.4716 3.23864 13.875 3.23864 14.3864C3.23864 15.0852 3.49716 15.6136 4.0142 15.9716C4.53693 16.3239 5.19886 16.5 6 16.5ZM21.0575 4.90909V6.61364H14.2734V4.90909H21.0575ZM16.2507 1.77273H18.2621V14.25C18.2621 14.8182 18.3445 15.2443 18.5092 15.5284C18.6797 15.8068 18.8956 15.9943 19.157 16.0909C19.424 16.1818 19.7053 16.2273 20.0007 16.2273C20.2223 16.2273 20.4041 16.2159 20.5462 16.1932C20.6882 16.1648 20.8018 16.142 20.8871 16.125L21.2962 17.9318C21.1598 17.983 20.9695 18.0341 20.7251 18.0852C20.4808 18.142 20.1712 18.1705 19.7962 18.1705C19.228 18.1705 18.6712 18.0483 18.1257 17.804C17.5859 17.5597 17.1371 17.1875 16.7791 16.6875C16.4268 16.1875 16.2507 15.5568 16.2507 14.7955V1.77273ZM31.1143 9.57955V11.4545H23.478V9.57955H31.1143Z"
            fill="#333153"
          />
          <path
            d="M37.0312 18L33.4688 4.90909H37.142L39.1705 13.7045H39.2898L41.4034 4.90909H45.0085L47.1562 13.6534H47.267L49.2614 4.90909H52.9261L49.3722 18H45.5284L43.2784 9.76705H43.1165L40.8665 18H37.0312ZM60.4496 18.2557C59.1257 18.2557 57.9808 17.9744 57.0149 17.4119C56.0547 16.8437 55.3132 16.054 54.7905 15.0426C54.2678 14.0256 54.0064 12.8466 54.0064 11.5057C54.0064 10.1534 54.2678 8.97159 54.7905 7.96023C55.3132 6.94318 56.0547 6.15341 57.0149 5.59091C57.9808 5.02273 59.1257 4.73864 60.4496 4.73864C61.7734 4.73864 62.9155 5.02273 63.8757 5.59091C64.8416 6.15341 65.5859 6.94318 66.1087 7.96023C66.6314 8.97159 66.8928 10.1534 66.8928 11.5057C66.8928 12.8466 66.6314 14.0256 66.1087 15.0426C65.5859 16.054 64.8416 16.8437 63.8757 17.4119C62.9155 17.9744 61.7734 18.2557 60.4496 18.2557ZM60.4666 15.4432C61.0689 15.4432 61.5717 15.2727 61.9751 14.9318C62.3786 14.5852 62.6825 14.1136 62.8871 13.517C63.0973 12.9205 63.2024 12.2415 63.2024 11.4801C63.2024 10.7188 63.0973 10.0398 62.8871 9.44318C62.6825 8.84659 62.3786 8.375 61.9751 8.02841C61.5717 7.68182 61.0689 7.50852 60.4666 7.50852C59.8587 7.50852 59.3473 7.68182 58.9325 8.02841C58.5234 8.375 58.2138 8.84659 58.0036 9.44318C57.799 10.0398 57.6967 10.7188 57.6967 11.4801C57.6967 12.2415 57.799 12.9205 58.0036 13.517C58.2138 14.1136 58.5234 14.5852 58.9325 14.9318C59.3473 15.2727 59.8587 15.4432 60.4666 15.4432ZM69.2536 18V4.90909H72.7734V7.19318H72.9098C73.1484 6.38068 73.549 5.76705 74.1115 5.35227C74.674 4.93182 75.3217 4.72159 76.0547 4.72159C76.2365 4.72159 76.4325 4.73295 76.6428 4.75568C76.853 4.77841 77.0376 4.80966 77.1967 4.84943V8.07102C77.0263 8.01989 76.7905 7.97443 76.4893 7.93466C76.1882 7.89489 75.9126 7.875 75.6626 7.875C75.1286 7.875 74.6513 7.99148 74.2308 8.22443C73.8161 8.4517 73.4865 8.76989 73.2422 9.17898C73.0036 9.58807 72.8842 10.0597 72.8842 10.5938V18H69.2536ZM82.3636 14.233L82.3722 9.87784H82.9006L87.0938 4.90909H91.2614L85.6278 11.4886H84.767L82.3636 14.233ZM79.0739 18V0.545454H82.7045V18H79.0739ZM87.2557 18L83.4034 12.2983L85.8239 9.73295L91.5085 18H87.2557Z"
            fill="#333153"
          />
        </svg>
      </div>
      <div className={styles.menu}>
        <div className={styles.actions}>
          <svg
            className={styles.favorites}
            width="14"
            height="12"
            viewBox="0 0 14 12"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6.54329 1.85453L7.0001 2.39097L7.45691 1.85453C8.04435 1.16469 8.94817 0.72793 9.8801 0.72793C11.5199 0.72793 12.8001 2.0081 12.8001 3.64793C12.8001 4.66044 12.3502 5.62601 11.4357 6.74406C10.5143 7.87052 9.18513 9.07731 7.52505 10.5827L7.52419 10.5834L6.99857 11.0619L6.47562 10.5895C6.47539 10.5893 6.47517 10.5891 6.47494 10.5889C4.81505 9.08047 3.48605 7.87227 2.56466 6.74501C1.65004 5.62605 1.2001 4.66045 1.2001 3.64793C1.2001 2.0081 2.48027 0.72793 4.1201 0.72793C5.05203 0.72793 5.95584 1.16469 6.54329 1.85453Z"
              stroke="#595959"
              strokeWidth="1.2"
            />
          </svg>
          <svg
            className={styles.notifications}
            width="14"
            height="14"
            viewBox="0 0 14 14"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M5.73924 1.04978C5.84083 0.798689 6.01509 0.583658 6.23968 0.432249C6.46428 0.28084 6.72897 0.199951 6.99983 0.199951C7.27069 0.199951 7.53538 0.28084 7.75998 0.432249C7.98457 0.583658 8.15883 0.798689 8.26042 1.04978C9.26586 1.32629 10.1527 1.92523 10.7848 2.75459C11.4169 3.58395 11.7593 4.59788 11.7593 5.64066V8.83428L13.005 10.7027C13.0733 10.8051 13.1125 10.9241 13.1185 11.0471C13.1245 11.17 13.0969 11.2923 13.0389 11.4009C12.9808 11.5094 12.8944 11.6001 12.7887 11.6634C12.6831 11.7266 12.5624 11.76 12.4393 11.76H9.35578C9.27392 12.3265 8.9907 12.8445 8.55802 13.2191C8.12534 13.5937 7.57217 13.8 6.99983 13.8C6.42749 13.8 5.87432 13.5937 5.44164 13.2191C5.00896 12.8445 4.72574 12.3265 4.64388 11.76H1.5604C1.43731 11.76 1.31651 11.7266 1.21091 11.6634C1.10531 11.6001 1.01886 11.5094 0.96079 11.4009C0.902718 11.2923 0.8752 11.17 0.881172 11.0471C0.887144 10.9241 0.926383 10.8051 0.994701 10.7027L2.24033 8.83428V5.64066C2.24033 3.44857 3.72257 1.60188 5.73924 1.04978ZM5.7568 11.76C5.88667 12.1826 6.07408 12.4409 6.27625 12.584C6.4485 12.7059 6.78916 12.7713 7.00017 12.7713C7.21118 12.7713 7.57638 12.7313 7.83458 12.5486C8.16226 12.3167 8.24839 11.959 8.31861 11.76H5.7568ZM6.99983 1.85273C6.09819 1.85273 4.93618 2.28174 4.29862 2.91929C3.66106 3.55685 3.30289 4.73901 3.30289 5.64066V9.0403C3.30292 9.17461 3.26317 9.30591 3.18866 9.41766L2.24033 10.7027H11.7593L10.8041 9.41766C10.7298 9.30584 10.6903 9.17454 10.6906 9.0403V5.64066C10.6906 4.73901 10.3324 3.55685 9.69484 2.91929C9.05728 2.28174 7.90147 1.85273 6.99983 1.85273Z"
              fill="#595959"
            />
          </svg>
        </div>

        <div className={styles.user}>
          <img className={styles.avatar} src={photo} alt="Avatar" />
          <p className={styles.nikname}>{formData.username}</p>
        </div>
      </div>
    </header>
  );
};
